{
  "type": "array",
  "items": {
    "type":"object",
    "properties":{
        "id":{"type": "string" },
        "name":{"type": "string"},
        "age":{"type": "integer"},
        "loyalty_level":{"type": "string"},
        "active":{"type": "boolean"},
        "joined":{"type": "string","format":"date"},
        "contact":{
                "type":"object",
                "properties":{
                    "email":{"type":"string"},
                    "phone":{"type":"string"}
                }
        },
        "address":{
                "type":"object",
                "properties":{
                    "city":{"type":"string"},
                    "country":{"type":"string"},
                    "postal_code":{"type":"string"}
                } 
        },
        "preferred_store":{
                "type":"object",
                "properties":{
                    "brand":{"type":"string"},
                    "location":{"type":"string"}
                }
        },
        "purchases":{
            "type":"array", 
            "items":{
                "type":"object",
                "properties":{
                    "date":{"type":"string","format":"date"},
                    "store":{"type":"string"},
                    "basket":{
                        "type":"array",
                        "items":{
                            "type":"object",
                            "properties":{
                                "product":{"type": "string"},
                                "category":{"type":"string"},
                                "quantity":{"type":"integer"},
                                "price":{"type":"number"}
                            }
                        }    
                    }
                }
            }
        },
        "lifetime_spend":{"type":"number"}
    }
  }
}